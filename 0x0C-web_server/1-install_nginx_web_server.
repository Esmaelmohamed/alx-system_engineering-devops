#!/usr/bin/env bash
# This script restarts a specified process gracefully without using systemctl

# Check if the process name is provided as an argument
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 PROCESS_NAME"
    exit 1
fi

# Assign the process name from the argument
PROCESS_NAME="$1"

# Check if the process is running
if ! pgrep -x "$PROCESS_NAME" >/dev/null; then
    echo "Error: Process '$PROCESS_NAME' is not running."
    exit 1
fi

# Send the SIGTERM signal to gracefully stop the process
killall -s TERM "$PROCESS_NAME"

# Wait for the process to stop
while pgrep -x "$PROCESS_NAME" >/dev/null; do
    sleep 1
done

# Start the process again
"$PROCESS_NAME" &

echo "Process '$PROCESS_NAME' restarted successfully."

